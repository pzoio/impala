<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
 
 <!-- added to impala-bootstrap.xml -->
 <bean id="moduleTestDirectory" class="org.impalaframework.bean.SystemPropertiesFactoryBean">
	 <property name="properties" ref="locationProperties"/>
	 <property name="propertyName" value="impala.module.test.dir"/>
	 <property name="defaultValue" value="bin"/>
 </bean>
 
 <!-- added to impala-bootstrap.xml -->
 <bean id="testModuleResourceFinder" class="org.impalaframework.resolver.FileModuleResourceFinder">
	 <property name="classDirectory" ref="moduleTestDirectory"/>
 </bean> 

 <!-- added to impala-bootstrap.xml -->
 <bean id="testResourceFinders" class="org.springframework.beans.factory.config.ListFactoryBean">
	<property name="sourceList">  
    	<list> 
    		<ref local = "testModuleResourceFinder"/>
    	</list>  
	</property> 
 </bean> 
 
 <!-- overrides value in impala-bootstrap.xml, setting value to TestEnabledModuleLocationResolver
 and adding testResourceFinders-->
 <bean id="moduleLocationResolver" class="org.impalaframework.resolver.TestEnabledModuleLocationResolver"
 	init-method="init">
	 <property name="workspaceRoot" ref="workspaceRoot"/>
	 <property name="applicationVersion" ref = "applicationVersion"/>
	 <property name="classResourceFinders" ref="classResourceFinders"/>
	 <property name="testResourceFinders" ref="testResourceFinders"/>
 </bean>
	
</beans>