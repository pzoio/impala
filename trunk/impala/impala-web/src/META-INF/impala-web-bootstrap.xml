<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

 <!-- ############## Servlet API wrapper definitions ############### -->

 <bean id="servletContextWrapper" 
	 class="org.impalaframework.web.servlet.wrapper.IdentityServletContextWrapper">
 </bean>
 
 <bean id="requestWrapperFactory" class="org.impalaframework.web.servlet.wrapper.IdentityHttpRequestWrapperFactory"/>
 
 <!-- ############## Module loader definitions ############### -->
 
 <!-- application context for root module, which will contributed to the Spring root application context key -->
 <bean id="rootModuleLoader" 
	 class="org.impalaframework.web.spring.module.RootWebModuleLoader"
	 parent = "baseModuleLoader">
	 <property name = "servletContextWrapper" ref = "servletContextWrapper"/>
 </bean>	
	
 <!-- looks for spring locations in servlet context -->
 <bean id="webRootModuleLoader" 
	 parent="baseModuleLoader"
	 class="org.impalaframework.web.spring.module.WebRootModuleLoader">
	 <property name = "servletContextWrapper" ref = "servletContextWrapper"/>
 </bean>	
	
 <!-- looks for spring locations in class path -->
 <bean id="servletModuleLoader" 
	 parent = "baseModuleLoader"
	 class="org.impalaframework.web.spring.module.WebModuleLoader">
	 <property name = "servletContextWrapper" ref = "servletContextWrapper"/>
 </bean>	
	
 <bean id="webPlaceholderModuleLoader" class="org.impalaframework.web.spring.loader.WebPlaceholderDelegatingContextLoader"/>			
 
 <bean id="moduleLoaderWebContributions" class="org.impalaframework.spring.module.registry.NamedBeanRegistryContributor">
 	<property name = "registryBeanName" value = "moduleLoaderRegistry"/>
	<property name = "contributions">
		<map>
			<entry key="webRootModuleLoader" value="web_root"/>
			<entry key="servletModuleLoader" value="servlet"/>
		</map>
	</property> 
 </bean>
 
 <bean id="delegatingContextLoaderWebContributions" class="org.impalaframework.spring.module.registry.NamedBeanRegistryContributor">
 	<property name = "registryBeanName" value = "delegatingContextLoaderRegistry"/>
	<property name = "contributions">
		<map>
			<entry key="webPlaceholderModuleLoader" value="web_placeholder"/>
		</map>
	</property> 
 </bean>
 
 <!-- ############## Type reader definitions ############### -->
 
 <bean id="webRootModuleTypeReader" 
	 class = "org.impalaframework.web.module.type.WebRootModuleTypeReader">
 </bean>
 
 <bean id="servletModuleTypeReader" 
	 class = "org.impalaframework.web.module.type.ServletModuleTypeReader">
 </bean>
 
 <bean id="webPlaceholderModuleTypeReader" 
	 class = "org.impalaframework.web.module.type.WebPlaceholderTypeReader">
 </bean>
 
 <bean id="typeReaderWebContributions" class="org.impalaframework.spring.module.registry.NamedBeanRegistryContributor">
 	<property name = "registryBeanName" value = "typeReaderRegistry"/>
	<property name = "contributions">
		<map>
			<entry key="webRootModuleTypeReader" value="web_root"/>
			<entry key="servletModuleTypeReader" value="servlet"/>
			<entry key="webPlaceholderModuleTypeReader" value="web_placeholder"/>
		</map>
	</property> 
 </bean>

</beans>