#summary List of checks to be made before a release

The following is the set of release steps which need to be followed as part of release.

== In Eclipse ==

=== Run Eclipse tests ===

Run `AllTests` for Impala, Entryorder and Petclinic applications, as JUnit test.
Run `EntryDAOTest` as JUnit test.
Run `InProjectEntryDAOTest` as JUnit test.

=== Run Interactive tests in Eclipse ===

Run `EntryDAOTest` as main class:

{{{
test (should print OK)
reload (all application classes should reload, all modules should reload)
module dao (module dao classes should reload, module dao should reload)
sc (should be given selection. Select number corresponding with `EntryServiceTest`)
test (should get output)
reload (as above with `EntryDAOTest`, but should include example-service module)
module merchant (as above with `EntryDAOTest`, but should reload example-service module)
}}} 

Run `InProjectEntryDAOTest` as main class:

{{{
test (should print OK)
reload (all application classes should reload, all modules should reload)
module dao (module dao classes should reload, module dao should reload)
}}} 

Run `ExampleServiceTest` as main class:

{{{
test (should print OK)
reload (as above)
module merchant (as above) 
cd (which will bring up a prompt, then select:)
example
sc (which will prompt for a class to select)
test (which should bring up a few, including `AlternativeEntryServiceTest` - select this one)
test (should print OK)
module dao
reload
test
}}}

=== Run up web apps in Eclipse ===

Run `StartServer` from _example-web/src_. Verify using the following urls:
  * http://localhost:8080/example-web/test.do
  * http://localhost:8080/example-web/servlet1/test.do1
  * http://localhost:8080/example-web/servlet2/test.do2

== In ANT ==

=== Basic build and test ===

Run `ant` for Impala
  
{{{
cd /localDisk/workspaces/impala/impala
ant 
ant test
}}}
  
Copy release files to Impala home. Note that this target is assuming that the `IMPALA_HOME` environment variable has been set.

{{{
ant tohome
}}}  

*Warning*: do not run this command if your IMPALA_HOME is set to the impala directory within the Impala source code workspace, as this could result in this directory being deleted and any outgoing changes being lost. Instead, set IMPALA_HOME to a staging directory where the Impala snapshot distribution can be build to. For example:

  * c:\impala-SNAPSHOT on Windows
  * /home/phil/impala-SNAPSHOT on MacOSX or Linux

=== Deploy and sanity check Petclinic ===

Run `ant fetch clean dist test` for Petclinic. Assuming location of ../petclinic relative to _impala_.

{{{
cd ../petclinic
ant fetch clean dist test
ant war tomcat
}}}  

Note that the _tomcat.home_ property`tomcat` target will need to be set correctly. Run tomcat 

Assumes Tomcat is installed at _/servers/apache-tomcat-5.5.26_.

{{{
cd /servers/apache-tomcat-5.5.26/bin
./catalina.sh run
}}}

Check application from 
  * http://localhost:8080/petclinic-web/

=== Deploy and sanity check Example sample ===
  
Run `ant fetch clean dist test` for Example.
  
{{{
cd ../example-sample/example
ant fetch clean dist test
ant war tomcat
}}}  

Run Tomcat as in Petclinic

Check the following urls:
  * http://localhost:8080/example-web/test.do
  * http://localhost:8080/example-web/servlet1/test.do1
  * http://localhost:8080/example-web/servlet2/test.do2
  
== Scaffold steps ==

Run through steps of scaffold build as [GettingStartedPart1 the getting started tutorial, part one].

== Publish release ==

Any errors encountered in the previous step should be recorded. If serious, the next step should not proceed.
  
  * Check next release version is correct in _release-build.properties_.
  * Run from from the main _impala_ project:
  
{{{
ant release
}}}
 
This will tag the SVN repository with the release name, and create a distribution file.
Upload _dist/impala-${project.version}.zip_ to [http://code.google.com/p/impala/downloads/list Google Code downloads].

== Sanity Check ==

Download release and go through scaffold steps as defined in [GettingStartedPart1 the getting started tutorial].

== Maven steps ==

Upload _dist/impala-${project.version}-bundle.jar_ to [http://code.google.com/p/impala/downloads/list Google Code downloads].
Follow the instructions on http://maven.apache.org/guides/mini/guide-central-repository-upload.html

Create issue at the following URL:
http://jira.codehaus.org/secure/CreateIssue.jspa

== Announcements ==

TODO: Add list of sites/mailing lists to add announcement.